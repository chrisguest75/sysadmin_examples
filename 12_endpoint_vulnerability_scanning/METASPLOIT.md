# README

Demonstrate how to use `metasploit` to scan for vulnerabilities

TODO:

* metasploitable
* openssh container

## Install the framework

To get the installer for the framework goto the nightly installers [here](https://github.com/rapid7/metasploit-framework/wiki/Nightly-Installers)

```sh
# configure a new database
msfconsole

# update a previously installed msf
msfupdate

# view a list of tips
tips

# show a list of exploits
show exploits
```

## Host an exploitable container

```sh
# you have to build with profiles as well
docker compose --profile nginx build --no-cache  
docker compose --profile nginx build 

# host containers
docker-compose --profile nginx up -d 
```

## msfconsole

```sh
# shell on metasploit container
docker exec -it  $(docker ps --filter name=12_endpoint_vulnerability_scanning-metasploit-1 -q) /bin/bash 

# initialise the db
msfdb init 

# metasploit console
msfconsole 

# inside msfconsole 
db_nmap -v -sV 172.16.238.0/24

db_nmap -sV -A 0.0.0.0 --script vulners

# after scanning use hosts
hosts
# add to RHOSTS
hosts -R

# search exploits
search SSH type:exploit
search platform:linux ssh
```

## ssh login
```sh
hosts

# look at ssh_login
info auxiliary/scanner/ssh/ssh_login

# use ssh login with known password
use auxiliary/scanner/ssh/ssh_login
set VERBOSE true
set PASSWORD 'test'
set USERNAME test
run
set RHOSTS 172.16.238.2
```

## Troubleshooting

Building container from shell

```sh
# build metasploit
docker build -t metasploit -f ./metasploit.Dockerfile . 
docker run -it --rm  --name metasploit --entrypoint /bin/bash metasploit

# build ssh
docker build -t ssh -f ./ssh.Dockerfile . 
docker run -it --rm --name ssh -p 22:22 --entrypoint /bin/bash ssh
docker run --rm --name ssh -p 8022:22 ssh
ssh -p 8022 test@0.0.0.0   
```

### Cleanup

```sh
docker compose --profile nginx down    
```

## Resources

* Metasploit homepage [here](https://www.metasploit.com/)
* Metasploit tutorial [here](https://jonathansblog.co.uk/metasploit-tutorial-for-beginners)
* Metasploit tutorial [here](https://jonathansblog.co.uk/how-to-use-metasploit-to-scan-for-vulnerabilities)
* Github repo [here](https://github.com/rapid7/metasploit-framework)
* Exploit DB [here](https://www.rapid7.com/db/?)


## Exploits
* [SSH brute force](https://charlesreid1.com/wiki/Metasploitable/SSH/Brute_Force)
* [SSH Exploit](https://charlesreid1.com/wiki/Metasploitable/SSH/Exploits)



https://blog.ropnop.com/docker-for-pentesters/
https://medium.com/@muchina/what-is-docker-2a21077b98df

https://stuffwithaurum.com/2020/04/17/metasploitable-3-linux-an-exploitation-guide/

https://www.rapid7.com/blog/post/2016/11/15/test-your-might-with-the-shiny-new-metasploitable3/

https://hub.docker.com/r/tleemcjr/metasploitable2
https://stack.watch/product/nginx/nginx/

https://null-byte.wonderhowto.com/how-to/use-metasploits-database-stay-organized-store-information-while-hacking-0192643/

https://websploit.org/

Metasploitable.

Metasploit.
==============================

Use an exploit - buffer overflow
Payload - Gets you a shell or whatever you wish

msfconsole
show exploits
info windows/dcerpc/ms03_026_dcom
use <exploit>
set RHOST <target host>
show payloads
set PAYLOAD
exploit

This guy uses metasploit to do it.  
http://www.darkoperator.com/blog/2009/12/11/enumeration-thru-dns-and-metasploit.html

https://github.com/The-Art-of-Hacking/h4cker
